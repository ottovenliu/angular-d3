"use strict";(self.webpackChunkangular_d3=self.webpackChunkangular_d3||[]).push([[9],{7009:(M,p,n)=>{n.r(p),n.d(p,{MapsModule:()=>F});var f=n(8519),v=n(9808),d=n(2330),t=n(5e3),a=n(1633);let C=(()=>{class i{constructor(){this.rwdSvgWidth=0,this.rwdSvgHeight=.8*this.rwdSvgWidth,this.chartName="bar",this.data=[],this.selectedGroups=[],this.margin=50,this.width=750-2*this.margin,this.height=750-2*this.margin,this.radius=Math.min(this.width,this.height)/2,this.previousGroups=[]}onResize(s){const r=s.target;this.rwdSvgWidth=document.querySelector("#"+this.chartName)?document.querySelector("#"+this.chartName).clientWidth:0,this.rwdSvgHeight=this.rwdSvgWidth,this.width=this.rwdSvgWidth,this.height=this.rwdSvgHeight,this.radius=Math.min(this.width,this.height)/2,(r.innerWidth>310&&r.innerWidth<400||r.innerWidth>=400)&&(this.createSvg(),this.drawChart(this.data))}ngOnChanges(s){s.selectedGroups&&s.selectedGroups.currentValue&&!s.selectedGroups.firstChange&&this.update(this.selectedGroups),s.selectedGroups&&s.selectedGroups.currentValue&&s.selectedGroups.firstChange&&(this.previousGroups=this.selectedGroups,console.log("this.previousGroups ",this.previousGroups))}ngOnInit(){}ngAfterViewInit(){this.rwdSvgWidth=document.querySelector("#"+this.chartName)?document.querySelector("#"+this.chartName).clientWidth:0,this.rwdSvgHeight=this.rwdSvgWidth,this.width=this.rwdSvgWidth-2*this.margin,this.height=this.rwdSvgHeight-2*this.margin,this.radius=Math.min(this.width,this.height)/2,this.createSvg(),this.createColors(),this.drawChart(this.data)}createSvg(){a.Ys(`figure#${this.chartName} svg`)&&a.Ys(`figure#${this.chartName} svg`).remove(),a.Ys(`figure#${this.chartName} .tooltip`)&&a.Ys(`figure#${this.chartName} .tooltip`).remove(),this.svg=a.Ys(`figure#${this.chartName}`).append("svg").attr("width",this.width).attr("height",this.height)}createColors(){this.colors=a.PKp().domain(["A","B","C"]).range(["#402D54","#D18975","#8FD175"])}drawChart(s){const r=[{long:9.083,lat:42.149,group:"A",size:34,Name:"Corsica"},{long:7.26,lat:43.71,group:"A",size:14,Name:"nice"},{long:2.349,lat:48.864,group:"B",size:87,Name:"Paris"},{long:-1.397,lat:43.664,group:"B",size:41,Name:"Hossegor"},{long:3.075,lat:50.64,group:"C",size:78,Name:"Lille"},{long:-3.83,lat:58,group:"C",size:12,Name:"Morlaix"}],l=a.mw4().center([2,47]).scale(1020).translate([this.width/2,this.height/2]);a.AVB("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then(o=>{o.features=o.features.filter(e=>"France"==e.properties.name);const m=a.PKp().domain(["A","B","C"]).range(["#402D54","#D18975","#8FD175"]),b=a.BYU().domain([1,100]).range([4,50]);this.svg.append("g").selectAll("path").data(o.features).join("path").attr("fill","#b8b8b8").attr("d",a.l49().projection(l)).style("stroke","black").style("opacity",.3),this.svg.selectAll("myCircles").data(r).join("circle").attr("class",e=>e.group).attr("cx",e=>l([e.long,e.lat])[0]).attr("cy",e=>l([e.long,e.lat])[1]).attr("r",e=>b(e.size)).style("fill",e=>m(e.group)).attr("stroke",e=>m(e.group)).attr("stroke-width",3).attr("fill-opacity",.4);let c=r.filter(e=>!this.previousGroups.includes(e.group));c=Array.from(new Set(c.map(e=>e.group))),c.forEach(e=>{this.svg.selectAll("."+e).style("opacity",0)});const h=a.Ys(`figure#${this.chartName}`).append("div").style("opacity",0).style("position","absolute").attr("class","tooltip").style("background-color","white").style("color","black").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");this.svg.on("mouseover",e=>{"circle"===e.srcElement.tagName&&(h.style("opacity",1),h.style("display","initial"),a.Ys(e.srcElement).attr("fill","red"))}).on("mousemove",e=>{"circle"===e.srcElement.tagName&&h.style("left",e.layerX+10+"px").style("top",e.layerY+"px").html("Group:"+e.target.__data__.group+"<br>City:"+e.target.__data__.Name)}).on("mouseout",e=>{"circle"===e.srcElement.tagName&&a.Ys(e.srcElement).attr("fill","#d04a35"),h.style("opacity",0),h.style("display","none")}).on("click",e=>{console.log("d.target.__data__:",e.target.__data__),console.log("d:",e)})})}update(s){const r=s.filter(o=>!this.previousGroups.includes(o)),l=this.previousGroups.filter(o=>!s.includes(o));l.length&&l.forEach(o=>{this.svg.selectAll("."+o).style("opacity",0)}),r.length&&r.forEach(o=>{this.svg.selectAll("."+o).transition().duration(1e3).style("opacity",1)}),this.previousGroups=s,console.log("previous",this.previousGroups)}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-map"]],hostBindings:function(s,r){1&s&&t.NdJ("resize",function(o){return r.onResize(o)},!1,t.Jf7)},inputs:{chartName:"chartName",data:"data",selectedGroups:"selectedGroups"},features:[t.TTD],decls:1,vars:1,consts:[[1,"RWDChart",3,"id"]],template:function(s,r){1&s&&t._UZ(0,"figure",0),2&s&&t.s9C("id",r.chartName)},styles:[".RWDChart[_ngcontent-%COMP%]{width:100%}"]}),i})();var y=n(9142);let g=(()=>{class i{constructor(){this.checkbox_1="",this.checkbox_2="",this.checkbox_3="",this.selectedGroups=["A","B","C"],this.pieData=[{Framework:"Vue",Stars:"166443",Released:"2014"},{Framework:"React",Stars:"150793",Released:"2013"},{Framework:"Angular",Stars:"62342",Released:"2016"},{Framework:"Backbone",Stars:"27647",Released:"2010"},{Framework:"Ember",Stars:"21471",Released:"2011"}]}ngOnInit(){}updateList(s){this.selectedGroups.includes(s)?this.selectedGroups.includes(s)&&(this.selectedGroups=this.selectedGroups.filter(r=>r!=s)):this.selectedGroups=[...this.selectedGroups,s]}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:28,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"text-primary-800"],[1,"card-body"],[1,"row"],[1,"col-md-12","col-lg-6"],[1,"d-flex"],["type","checkbox","checked","",1,"checkbox","me-1",3,"click"],[1,"me-1","text-primary-800"],["chartName","Map",3,"data","selectedGroups"],["value","MouseOver","styleClass","me-1"],["value","Filter","styleClass","me-1"],["value","RWD","styleClass","me-1"],["value","Click","styleClass","me-1"],["value","LazyLoad","styleClass","me-1"]],template:function(s,r){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Bubble Map"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("click",function(){return r.updateList("A")}),t.qZA(),t.TgZ(9,"label",8),t._uU(10,"group A"),t.qZA(),t.TgZ(11,"input",7),t.NdJ("click",function(){return r.updateList("B")}),t.qZA(),t.TgZ(12,"label",8),t._uU(13,"group B"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("click",function(){return r.updateList("C")}),t.qZA(),t.TgZ(15,"label",8),t._uU(16,"group C"),t.qZA()(),t._UZ(17,"app-map",9),t.qZA(),t.TgZ(18,"div",5)(19,"strong",2),t._uU(20,"Tag: "),t._UZ(21,"p-tag",10)(22,"p-tag",11)(23,"p-tag",12)(24,"p-tag",13)(25,"p-tag",14),t.qZA(),t.TgZ(26,"p",2),t._uU(27," \u57fa\u790e\u578b\u5730\u5716\u6a21\u7d44\uff0c\u5177\u6709\u6ed1\u9f20\u6ed1\u52d5(MouseOver)\u6642\u5373\u6642\u986f\u793a\u5730\u5716\u5713\u5708(Bouble)\u540d\u7a31\u8207\u6578\u503c\u7684\u529f\u80fd\uff0c\u5177\u6709\u9ede\u64ca\u9078\u53d6\u60f3\u986f\u793a\u7684\u7fa4\u7d44\u4e26\u5728\u5730\u5716\u4e0a\u986f\u793a\u6240\u5c6c\u7bc4\u570d\uff0c\u4e5f\u53ef\u900f\u904e\u9ede\u64ca\u5730\u5716\u7fa4\u7d44\u6ce1\u6ce1\u986f\u793a\u8a72\u8cc7\u6599\u700f\u89bd\uff0c\u53ef\u900f\u904eConsole\u986f\u793a\u9ede\u64ca\u4e8b\u4ef6\u53cd\u994b\u3002 "),t.qZA()()()()()),2&s&&(t.xp6(17),t.Q6J("data",r.pieData)("selectedGroups",r.selectedGroups))},directives:[C,y.V],encapsulation:2}),i})();const A=[{path:"",component:g},{path:"BubbleMap",component:g}];let w=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(A)],d.Bz]}),i})(),F=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[v.ez,f.m,w]]}),i})()}}]);